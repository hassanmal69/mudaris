"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fromZodError = void 0;
const config_1 = require("./config");
const fromZodIssue_1 = require("./fromZodIssue");
const prefixMessage_1 = require("./prefixMessage");
const ValidationError_1 = require("./ValidationError");
function fromZodError(zodError, options = {}) {
    const { maxIssuesInMessage = config_1.MAX_ISSUES_IN_MESSAGE, issueSeparator = config_1.ISSUE_SEPARATOR, unionSeparator = config_1.UNION_SEPARATOR, prefixSeparator = config_1.PREFIX_SEPARATOR, prefix = config_1.PREFIX, includePath = true, } = options;
    const zodIssues = zodError.errors;
    const reason = zodIssues.length === 0
        ? zodError.message
        : zodIssues
            .slice(0, maxIssuesInMessage)
            .map((issue) => (0, fromZodIssue_1.getMessageFromZodIssue)({
            issue,
            issueSeparator,
            unionSeparator,
            includePath,
        }))
            .join(issueSeparator);
    const message = (0, prefixMessage_1.prefixMessage)(reason, prefix, prefixSeparator);
    return new ValidationError_1.ValidationError(message, { cause: zodError });
}
exports.fromZodError = fromZodError;
